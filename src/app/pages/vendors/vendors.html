<div class="vendors-card">
  <div class="header">
    <div>
      <h1>Vendors</h1>
      <p class="muted">Manage vendor codes and contact info.</p>
    </div>
    <button class="btn primary" type="button" (click)="openModal()">Add vendor</button>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Code</th>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Company</th>
          <th>Address</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        @for (v of vendors(); track v.code) {
        <tr>
          <td>{{ v.code }}</td>
          <td>{{ v.name }}</td>
          <td>{{ v.email }}</td>
          <td>{{ v.phone }}</td>
          <td>{{ v.company }}</td>
          <td>{{ v.address }}</td>
          <td class="actions">
            <button class="link-btn" type="button" (click)="edit(v.code)">Edit</button>
            <button class="link-btn danger" type="button" (click)="remove(v.code)">Delete</button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  @if (confirmDelete) {
  <div class="modal-backdrop">
    <app-confirm-dialog
      title="Delete vendor"
      message="Are you sure you want to delete this vendor?"
      confirmLabel="Delete"
      cancelLabel="Cancel"
      (confirm)="confirmDeleteOk()"
      (cancel)="cancelDelete()"
    />
  </div>
  }

  @if (showModal) {
  <div class="modal-backdrop">
    <div class="modal">
      <div class="modal-header">
        <h2>{{ form.code ? 'Edit vendor' : 'Add vendor' }}</h2>
        <button class="icon-btn" type="button" (click)="closeModal()">âœ•</button>
      </div>
      <div class="form-grid">
        <label class="field">
          <span class="field-label">Code</span>
          <div class="input-shell">
            <input type="text" [(ngModel)]="form.code" placeholder="e.g., ILAN" />
          </div>
        </label>
        <label class="field">
          <span class="field-label">Name</span>
          <div class="input-shell">
            <input type="text" [(ngModel)]="form.name" placeholder="Vendor name" />
          </div>
        </label>
        <label class="field">
          <span class="field-label">Email</span>
          <div class="input-shell">
            <input type="email" [(ngModel)]="form.email" placeholder="Email" />
          </div>
        </label>
        <label class="field">
          <span class="field-label">Phone</span>
          <div class="input-shell">
            <input type="text" [(ngModel)]="form.phone" placeholder="Phone" />
          </div>
        </label>
        <label class="field">
          <span class="field-label">Company</span>
          <div class="input-shell">
            <input type="text" [(ngModel)]="form.company" placeholder="Company" />
          </div>
        </label>
        <label class="field">
          <span class="field-label">Address</span>
          <div class="input-shell">
            <input type="text" [(ngModel)]="form.address" placeholder="Address" />
          </div>
        </label>
      </div>
      <div class="actions">
        <button class="btn primary" type="button" (click)="save()">Save</button>
        <button class="btn ghost" type="button" (click)="closeModal()">Cancel</button>
      </div>
      @if (error) { <p class="status error">{{ error }}</p> }
    </div>
  </div>
  }
</div>
